<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMS | Login</title>

    <!-- Main Styles -->
    <link rel="stylesheet" href="css/style.css">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <main class="auth-wrapper">

        <!-- ================= LEFT : BRAND / HERO ================= -->
        <section class="auth-hero">

            <div class="hero-content">
                <h1 class="hero-title">
                    For Karachi Wholesalers & Retailers <br>
                    <span style="color: var(--accent-color);">Easy</span> Online Inventory Control System
                </h1>

                <div class="hero-tagline">
                    <p class="tag-en">Manage stock, track sales & get alerts, for importers, wholesalers & retailers in
                        Karachi</p>
                    <p class="tag-ur">ฺฉุฑุงฺ ฺฉ ุงููพูุฑูนุฑุฒุ ูู ุณูุฑุฒ ุงูุฑ ุฑูนูุฑุฒ ฺฉ ู โ ุงุณูนุงฺฉ ุณูุจฺพุงูฺบุ ุณูุฒ ูนุฑฺฉ ฺฉุฑฺบ
                        ุงูุฑ ุงูุฑูนุณ ุญุงุตู ฺฉุฑฺบ</p>
                </div>

                <!-- Features Grid -->
                <div class="features-grid">
                    <div class="feature-item">
                        <i class="fa-solid fa-chart-line feature-icon"></i>
                        <span class="feature-text">Real-time Stock Tracking</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-truck-field feature-icon"></i>
                        <span class="feature-text">Supplier & Purchase Order</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-file-invoice-dollar feature-icon"></i>
                        <span class="feature-text">Sales & Profit Reporting</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa-solid fa-bell feature-icon"></i>
                        <span class="feature-text">Low Stock Alerts</span>
                    </div>
                </div>

                <!-- FAQ Section -->
                <div class="faq-container">
                    <h3 class="faq-title">โญ Frequently Asked Questions</h3>

                    <!-- Visible Items (1-5) -->
                    <!-- Visible Items (1-5) -->
                    <div class="faq-item">
                        <div class="faq-header" onclick="toggleFaq(this)">
                            <div class="faq-q">๐ฑ Which devices does IMS support? | IMS ฺฉู ฺูุงุฆุณุฒ ูพุฑ ฺฉุงู ฺฉุฑุชุง ุ</div>
                            <i class="fa-solid fa-chevron-down faq-arrow"></i>
                        </div>
                        <div class="faq-a">IMS ฺุณฺฉ ูนุงูพุ ููพ ูนุงูพุ ูนุจููน ุงูุฑ ููุจุงุฆู ููู ูพุฑ ฺฉุงู ฺฉุฑุชุง  ุขูพ Chromeุ Edge
                            ุง ฺฉุณ ุจฺพ ุฌุฏุฏ ุจุฑุงุคุฒุฑ ฺฉ ุฐุฑุน ุณุณูนู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุช ฺบุ ฺฉุณ ุฎุงุต ุณุณูนู ฺฉ ุถุฑูุฑุช ูฺบ</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-header" onclick="toggleFaq(this)">
                            <div class="faq-q">๐ฒ Can I use IMS on mobile or tablet? | ฺฉุง IMS ููุจุงุฆู ุง ูนุจููน ูพุฑ
                                ุงุณุชุนูุงู ู
                                ุณฺฉุชุง ุ</div>
                            <i class="fa-solid fa-chevron-down faq-arrow"></i>
                        </div>
                        <div class="faq-a">ุฌ ุงฺบ IMS ููุจุงุฆู ูุฑูฺู  ุงูุฑ ุงูฺุฑุงุฆฺุ ุขุฆ ููู ุงูุฑ ูนุจููน ูพุฑ ุขุณุงู ุณ
                            ฺูุชุง  ุขูพ ุฏฺฉุงูุ ฺฏูุฏุงู ุง ุณูุฑ ฺฉ ุฏูุฑุงู ุจฺพ ุณุณูนู ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุช ฺบ</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-header" onclick="toggleFaq(this)">
                            <div class="faq-q">๐ Is internet required? | ฺฉุง ุงููนุฑููน ุถุฑูุฑ ุ</div>
                            <i class="fa-solid fa-chevron-down faq-arrow"></i>
                        </div>
                        <div class="faq-a">ุฌ ุงฺบุ IMS ุงุณุชุนูุงู ฺฉุฑู ฺฉ ู ุงููนุฑููน ฺฉูฺฉุดู ุถุฑูุฑ  ุชุงู  ุณุณูนู ฺฉูุฒูุฑ ุง
                            ุณุณุช ุงููนุฑููน ูพุฑ ุจฺพ ุจุชุฑ ุทุฑู ุณ ฺฉุงู ฺฉุฑุชุง </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-header" onclick="toggleFaq(this)">
                            <div class="faq-q">๐ Is my data secure? | ฺฉุง ูุฑุง ฺูนุง ูุญููุธ ุ</div>
                            <i class="fa-solid fa-chevron-down faq-arrow"></i>
                        </div>
                        <div class="faq-a">ุจุงูฺฉู ุขูพ ฺฉ ฺฉุงุฑูุจุงุฑ ฺฉุง ฺูนุง ูุญููุธ ุงูุฑ ุฎู ุฑุชุง  ุตุฑู ุงุฌุงุฒุช ุงูุช ุตุงุฑูู
                             ูุงฺฏ ุงูู ฺฉุฑ ฺฉ ฺูนุง ุชฺฉ ุฑุณุงุฆ ุญุงุตู ฺฉุฑ ุณฺฉุช ฺบ</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-header" onclick="toggleFaq(this)">
                            <div class="faq-q">๐ฐ What is the pricing? | IMS ฺฉ ููุช ฺฉุง ุ</div>
                            <i class="fa-solid fa-chevron-down faq-arrow"></i>
                        </div>
                        <div class="faq-a">IMS ฺฉ ููุช ุณุงุฏ ุงูุฑ ููุงุณุจ ุ ุฎุงุต ุทูุฑ ูพุฑ ฺฺพููน ุงูุฑ ุฏุฑูุงู ฺฉุงุฑูุจุงุฑ ฺฉ ู
                             ุฏุณุช ุญุณุงุจ ฺฉุชุงุจ ุงูุฑ ุงุถุงู ุนูู ฺฉ ููุงุจู ูฺบ ุฒุงุฏ ูุงุฆุฏ ููุฏ </div>
                    </div>

                    <!-- Hidden Items (6-10) -->
                    <div id="moreFaqs" class="faq-hidden">
                        <div class="faq-item">
                            <div class="faq-header" onclick="toggleFaq(this)">
                                <div class="faq-q">โ Any hidden charges? | ฺฉุง ฺฉูุฆ ูพูุดุฏ ฺุงุฑุฌุฒ ฺบุ</div>
                                <i class="fa-solid fa-chevron-down faq-arrow"></i>
                            </div>
                            <div class="faq-a">ูฺบ ฺฉูุฆ ูพูุดุฏ ฺุงุฑุฌุฒ ูฺบ ฺบ ุฌู ููุช ุท ฺฉ ุฌุงุช  ู ุขุฎุฑ ูุช ุ
                                ุจุนุฏ ูฺบ ฺฉูุฆ ุงุถุงู ูุณ ูฺบ ู ุฌุงุช</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-header" onclick="toggleFaq(this)">
                                <div class="faq-q">๐ Low stock alerts? | ฺฉุง ฺฉู ุงุณูนุงฺฉ ฺฉ ุงุทูุงุน ููุช ุ</div>
                                <i class="fa-solid fa-chevron-down faq-arrow"></i>
                            </div>
                            <div class="faq-a">ุฌ ุงฺบ ุฌุจ ุงุณูนุงฺฉ ฺฉู ูู ูฺฏุชุง  ุชู IMS ุฎูุฏฺฉุงุฑ ุทูุฑ ูพุฑ ุงูุฑูน ูุฑุงู ฺฉุฑุชุง 
                                ุชุงฺฉ ุขูพ ุจุฑููุช ุณุงูุงู ุฏูุจุงุฑ ููฺฏูุง ุณฺฉฺบ</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-header" onclick="toggleFaq(this)">
                                <div class="faq-q">๐ Reports available? | ฺฉุง ุฑูพูุฑูนุณ ุฏุณุชุงุจ ฺบุ</div>
                                <i class="fa-solid fa-chevron-down faq-arrow"></i>
                            </div>
                            <div class="faq-a">ุฌ ุงฺบ ุขูพ ููุ ูุงุงู ุงูุฑ ุณุงูุงู ุฑูพูุฑูนุณ ุฏฺฉฺพ ุงูุฑ ฺุงุคู ููฺ ฺฉุฑ ุณฺฉุช ฺบุ
                                ุฌู ูฺบ ุณูุฒุ ุงุณูนุงฺฉ ุงูุฑ ุฎุฑุฏุงุฑ ฺฉ ูฺฉูู ุชูุตู ูุช </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-header" onclick="toggleFaq(this)">
                                <div class="faq-q">๐ WhatsApp support available? | ฺฉุง ูุงูนุณ ุงูพ ุณูพูุฑูน ุฏุณุชุงุจ ุ</div>
                                <i class="fa-solid fa-chevron-down faq-arrow"></i>
                            </div>
                            <div class="faq-a">ุฌ ุงฺบ ุตุงุฑูู ฺฉู ูุงูนุณ ุงูพ ฺฉ ุฐุฑุน ุณูพูุฑูน ูุฑุงู ฺฉ ุฌุงุช  ุชุงฺฉ ูุณุงุฆู ฺฉุง
                                ุญู ุฌูุฏ ุงูุฑ ุขุณุงู ุณ ู ุณฺฉ</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-header" onclick="toggleFaq(this)">
                                <div class="faq-q">๐ง๐ผ Easy for non-technical users? | ฺฉุง  ุบุฑ ุชฺฉูฺฉ ุนูู ฺฉ ู
                                    ุขุณุงู
                                    ุ</div>
                                <i class="fa-solid fa-chevron-down faq-arrow"></i>
                            </div>
                            <div class="faq-a">ุจุงูฺฉู IMS ุณุงุฏ ุงูุฑ ุตุงุฑู ุฏูุณุช ุณุณูนู  ุจูุงุฏ ฺฉููพููนุฑ ูุนูููุงุช ุฑฺฉฺพู ูุงูุง
                                ุนูู ุจฺพ ุงุณ ุขุณุงู ุณ ุงุณุชุนูุงู ฺฉุฑ ุณฺฉุชุง </div>
                        </div>
                    </div>

                    <button class="btn-view-more" id="btnToggleFaq" onclick="toggleFaqs()">View More FAQs</button>

                    <script>
                        function toggleFaqs() {
                            const moreDiv = document.getElementById('moreFaqs');
                            const btn = document.getElementById('btnToggleFaq');

                            if (moreDiv.classList.contains('faq-hidden')) {
                                moreDiv.classList.remove('faq-hidden');
                                btn.textContent = "View Less FAQs";
                            } else {
                                moreDiv.classList.add('faq-hidden');
                                btn.textContent = "View More FAQs";
                            }
                        }

                        function toggleFaq(header) {
                            const item = header.parentElement;
                            const isActive = item.classList.contains('active');

                            // Close all others
                            document.querySelectorAll('.faq-item').forEach(i => {
                                i.classList.remove('active');
                            });

                            // Toggle clicked one
                            if (!isActive) {
                                item.classList.add('active');
                            }
                        }
                    </script>
                </div>

                <!-- Banner (Hidden for now to focus on features) -->
                <div class="hero-banner hidden" id="activeBanner">
                    <span>Banner Space (720x120)</span>
                </div>
            </div>

            <!-- Social + Footer -->
            <div class="hero-footer">
                <div class="hero-social">
                    <a href="#" class="social-icon"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fa-brands fa-linkedin-in"></i></a>
                </div>

                <div class="hero-copyright">
                    &copy; 2026 IMS Cloud. All Rights Reserved.
                </div>
            </div>

        </section>

        <!-- ================= RIGHT : AUTH FORMS ================= -->
        <section class="auth-form-container">

            <!-- LOGIN -->
            <div class="auth-card" id="loginForm">
                <div class="auth-logo">
                    <i class="fa-solid fa-boxes-stacked"></i>
                    <span>IMS Cloud</span>
                </div>

                <h2 class="auth-title">Welcome Back</h2>

                <form id="formLogin">

                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" class="form-input" id="loginCompany" placeholder="Enter company name"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" id="loginUsername" placeholder="Enter your username"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password"
                            required>
                    </div>

                    <button type="submit" class="btn btn-primary" id="btnLogin">
                        <span>Sign In</span>
                    </button>

                </form>

                <div class="auth-footer">
                    Donโt have an account?
                    <a href="#" id="linkToRegister">Create Account</a>
                </div>
            </div>

            <!-- REGISTER -->
            <div class="auth-card hidden" id="registerForm">
                <div class="auth-logo">
                    <i class="fa-solid fa-user-plus"></i>
                    <span>Join IMS</span>
                </div>

                <h2 class="auth-title">Create Account</h2>

                <form id="formRegister">

                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" class="form-input" id="regCompany" placeholder="Enter company name" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Customer Name</label>
                        <input type="text" class="form-input" id="regCustomer" placeholder="Enter customer name"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="regPassword" placeholder="Minimum 6 characters"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Re-enter Password</label>
                        <input type="password" class="form-input" id="regConfirmPassword" placeholder="Repeat password"
                            required>
                    </div>

                    <button type="submit" class="btn btn-primary" id="btnRegister">
                        <span>Send Request</span>
                    </button>

                </form>

                <div class="auth-footer">
                    Already have an account?
                    <a href="#" id="linkToLogin">Sign In</a>
                </div>
            </div>

        </section>

    </main>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/YOUR_NUMBER" target="_blank" class="whatsapp-float">
        <i class="fa-brands fa-whatsapp"></i>
    </a>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fa-solid fa-circle-info"></i>
        <span id="toastMessage">Notification here</span>
    </div>

    <!-- Scripts (UNCHANGED) -->
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>

    <!-- Inline JS (UNCHANGED) -->
    <script>
        function toggleAuth() {
            document.getElementById('loginForm').classList.toggle('hidden');
            document.getElementById('registerForm').classList.toggle('hidden');
        }

        document.getElementById('linkToRegister').addEventListener('click', (e) => {
            e.preventDefault();
            toggleAuth();
        });

        document.getElementById('linkToLogin').addEventListener('click', (e) => {
            e.preventDefault();
            toggleAuth();
        });

        const showToast = (msg, type = 'info') => {
            const toast = document.getElementById('toast');
            const msgEl = document.getElementById('toastMessage');

            toast.className = `toast ${type} show`;
            msgEl.textContent = msg;

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        };

        document.getElementById('formLogin').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btnLogin');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<div class="spinner"></div>';
            btn.disabled = true;

            const company = document.getElementById('loginCompany').value;
            const username = document.getElementById('loginUsername').value;
            const pass = document.getElementById('loginPassword').value;

            try {
                const res = await Auth.login(username, pass);
                if (res.success) {
                    showToast('Login successful!', 'success');
                    setTimeout(() => {
                        window.location.href = res.role === 'ADMIN'
                            ? 'page/admin.html'
                            : 'page/dashboard.html';
                    }, 1000);
                } else {
                    showToast(res.message || 'Login failed', 'error');
                }
            } catch {
                showToast('Something went wrong', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        document.getElementById('formRegister').addEventListener('submit', async (e) => {
            e.preventDefault();

            const p1 = document.getElementById('regPassword').value;
            const p2 = document.getElementById('regConfirmPassword').value;

            if (p1 !== p2) {
                showToast('Passwords do not match', 'error');
                return;
            }

            const btn = document.getElementById('btnRegister');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<div class="spinner"></div>';
            btn.disabled = true;

            const data = {
                name: document.getElementById('regCompany').value,
                username: document.getElementById('regCustomer').value,
                password: p1
            };

            try {
                const res = await Auth.register(data);
                if (res.success) {
                    showToast('Request sent! Wait for admin approval.', 'success');
                    setTimeout(toggleAuth, 2000);
                    document.getElementById('formRegister').reset();
                } else {
                    showToast(res.message || 'Registration failed', 'error');
                }
            } catch {
                showToast('Something went wrong', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        document.addEventListener('DOMContentLoaded', async () => {
            if (CONFIG.API_URL) {
                try {
                    const res = await fetch(CONFIG.API_URL, {
                        method: 'POST',
                        body: JSON.stringify({ action: 'getBanners' })
                    });
                    const data = await res.json();
                    if (data.success && data.bannerUrl) {
                        const bannerDiv = document.getElementById('activeBanner');
                        bannerDiv.innerHTML =
                            `<img src="${data.bannerUrl}" alt="System Banner"
                            style="width:100%;height:100%;object-fit:cover;border-radius:12px;">`;
                        bannerDiv.style.border = 'none';
                        bannerDiv.style.background = 'transparent';
                    }
                } catch (e) {
                    console.error("Failed to load banner", e);
                }
            }
        });
    </script>

</body>

</html>