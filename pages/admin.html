<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cloud Inventory â€” Admin Panel</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
  body {
    background-image: url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=3840&q=80');
    background-size: cover;
    background-position: center;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  .card-white { background-color: rgba(255,255,255,0.9); color: #1f2937; padding:1.5rem; border-radius:1rem; }
  .btn-red { background-color:#dc2626; color:white; padding:0.5rem 1rem; border-radius:0.5rem; }
  .btn-red:hover { background-color:#b91c1c; }
  .btn-blue { background-color:#1d4ed8; color:white; padding:0.5rem 1rem; border-radius:0.5rem; }
  .btn-blue:hover { background-color:#1e40af; }

  /* Sidebar Styles */
  #sidebar {
    position: fixed;
    top: 0;
    left: -230px;
    width: 230px;
    height: 100vh;
    background: rgba(255,255,255,0.85);
    padding: 1rem;
    border-radius: 0 1rem 1rem 0;
    transition: left .3s ease;
    z-index: 999;
    backdrop-filter: blur(8px);
  }
  #sidebar.show { left: 0; }
  #sidebarTrigger {
    position: fixed;
    top: 0;
    left: 0;
    width: 20px;
    height: 100vh;
    z-index: 998;
  }
  .menu-btn {
    width: 100%;
    text-align: left;
    margin-bottom: .5rem;
    padding: .5rem 1rem;
    border-radius: .5rem;
    color: white;
    font-weight: 500;
    transition: .2s;
  }
  .btn-red-sidebar { background-color:#e50914; }
  .btn-red-sidebar:hover { background-color:#b00610; }
  .banner-preview { max-width:150px; max-height:80px; border-radius:6px; object-fit:cover; }
</style>
</head>

<body class="min-h-screen p-6 text-white">

<!-- SIDEBAR TRIGGER -->
<div id="sidebarTrigger"></div>

<!-- SIDEBAR -->
<aside id="sidebar">
  <h1 class="text-2xl font-bold mb-6 text-gray-900">CloudInventory</h1>

  <a href="../index.html"><button class="menu-btn btn-blue">Home</button></a>
  <a href="dashboard.html"><button class="menu-btn btn-blue">Dashboard</button></a>
  <a href="sales.html"><button class="menu-btn btn-blue">Sales</button></a>
  <a href="purchase.html"><button class="menu-btn btn-blue">Purchases</button></a>
  <a href="stock.html"><button class="menu-btn btn-blue">Stock</button></a>
  <a href="report.html"><button class="menu-btn btn-blue">Report</button></a>
  <a href="admin.html"><button class="menu-btn btn-red-sidebar">Admin</button></a>
</aside>

<h1 class="text-3xl font-bold mb-6">Admin Panel</h1>

<div id="content"></div>

<!-- SIDEBAR SCRIPT -->
<script>
  const sidebar = document.getElementById("sidebar");
  const trigger = document.getElementById("sidebarTrigger");

  trigger.addEventListener("mouseenter", () => { sidebar.classList.add("show"); });
  sidebar.addEventListener("mouseleave", () => { sidebar.classList.remove("show"); });
</script>

<script>
let users = JSON.parse(localStorage.getItem("userList") || "[]");
let stock = JSON.parse(localStorage.getItem("stockData") || "[]");
let banners = JSON.parse(localStorage.getItem("bannerList") || "[]");

function saveUsers(){ localStorage.setItem("userList", JSON.stringify(users)); }
function saveStock(){ localStorage.setItem("stockData", JSON.stringify(stock)); }
function saveBanners(){ localStorage.setItem("bannerList", JSON.stringify(banners)); }

function renderAdmin(){
  let html = `<div class="grid grid-cols-1 md:grid-cols-2 gap-6">`;

  // Manage Users
  html += `
    <div class="card-white">
      <h2 class="text-xl font-bold mb-4">Manage Users</h2>
      <input id="uName" type="text" placeholder="User Name" class="p-2 border rounded-lg w-full mb-2">
      <input id="uPass" type="password" placeholder="Password" class="p-2 border rounded-lg w-full mb-2">
      <button id="addUser" class="btn-red mb-4">Add User</button>
      <ul>`;
  users.forEach((u,i)=>{
    html += `<li class="mb-2 flex justify-between">${u.name}<button onclick="deleteUser(${i})" class="text-red-600">Delete</button></li>`;
  });
  html += `</ul></div>`;

  // Manage Stock
  html += `
    <div class="card-white">
      <h2 class="text-xl font-bold mb-4">Manage Stock</h2>
      <input id="sName" type="text" placeholder="Product Name" class="p-2 border rounded-lg w-full mb-2">
      <input id="sModel" type="text" placeholder="Model" class="p-2 border rounded-lg w-full mb-2">
      <input id="sSerial" type="text" placeholder="Serial Number" class="p-2 border rounded-lg w-full mb-2">
      <input id="sQty" type="number" placeholder="Quantity" class="p-2 border rounded-lg w-full mb-2">
      <input id="sPrice" type="number" placeholder="Price" class="p-2 border rounded-lg w-full mb-2">
      <select id="sType" class="p-2 border rounded-lg w-full mb-4">
        <option value="Cash">Cash</option>
        <option value="Credit">Credit</option>
      </select>
      <button id="addStock" class="btn-red mb-4">Add to Stock</button>
      <ul>`;
  stock.forEach((s,i)=>{
    html += `<li class="mb-2 flex justify-between">${s.name} (${s.model})<button onclick="deleteStock(${i})" class="text-red-600">Delete</button></li>`;
  });
  html += `</ul></div>`;

  // Manage Banners
  html += `
    <div class="card-white md:col-span-2">
      <h2 class="text-xl font-bold mb-4">Manage Banners</h2>
      <input id="bTitle" type="text" placeholder="Banner Title" class="p-2 border rounded-lg w-full mb-2">
      <input id="bUrl" type="text" placeholder="Image URL (GitHub Raw link)" class="p-2 border rounded-lg w-full mb-2">
      <button id="addBanner" class="btn-blue mb-4">Add Banner</button>
      <ul>`;
  banners.forEach((b,i)=>{
    html += `<li class="mb-3 flex justify-between items-center">
      <div><img src="${b.url}" alt="${b.title}" class="banner-preview mr-2"> ${b.title}</div>
      <button onclick="deleteBanner(${i})" class="text-red-600">Delete</button>
    </li>`;
  });
  html += `</ul></div>`;

  html += `</div>`; // grid end
  document.getElementById("content").innerHTML = html;

  // Add User
  document.getElementById("addUser").onclick = ()=>{
    const name = document.getElementById("uName").value.trim();
    const pass = document.getElementById("uPass").value.trim();
    if(!name || !pass) return alert("Both fields required.");
    users.push({ name, password: pass });
    saveUsers();
    renderAdmin();
  };

  // Add Stock
  document.getElementById("addStock").onclick = ()=>{
    const name = document.getElementById("sName").value.trim();
    const model = document.getElementById("sModel").value.trim();
    const serial = document.getElementById("sSerial").value.trim();
    const qty = Number(document.getElementById("sQty").value);
    const price = Number(document.getElementById("sPrice").value);
    const type = document.getElementById("sType").value;
    if(!name || !model || !serial || !qty || !price) return alert("All fields required.");
    stock.push({ name, model, serial, qty, price, type });
    saveStock();
    renderAdmin();
  };

  // Add Banner
  document.getElementById("addBanner").onclick = ()=>{
    const title = document.getElementById("bTitle").value.trim();
    const url = document.getElementById("bUrl").value.trim();
    if(!title || !url) return alert("Both fields required.");
    banners.push({ title, url });
    saveBanners();
    renderAdmin();
  };
}

function deleteUser(i){ if(confirm("Delete this user?")){ users.splice(i,1); saveUsers(); renderAdmin(); } }
function deleteStock(i){ if(confirm("Delete this product?")){ stock.splice(i,1); saveStock(); renderAdmin(); } }
function deleteBanner(i){ if(confirm("Delete this banner?")){ banners.splice(i,1); saveBanners(); renderAdmin(); } }

renderAdmin();
</script>

</body>
</html>
